// Multi-chain configuration registry
// Each supported chain has its contract addresses, creation codes, and metadata

import { defineChain, type Chain } from 'viem';

export interface ChainContracts {
  announcer: string;
  registry: string;
  nameRegistry: string;
  walletFactory: string;
  legacyWalletFactory: string;
  accountFactory: string;
  legacyAccountFactory: string;
  entryPoint: string;
  paymaster: string;
  dustPool: string | null;
  dustPoolVerifier: string | null;
  subAccount7702: string | null;
  nameRegistryMerkle: string | null;
  nameVerifier: string | null;
}

export interface ChainCreationCodes {
  wallet: string;
  legacyWallet: string;
  account: string;
  legacyAccount: string;
}

export interface ChainConfig {
  id: number;
  name: string;
  rpcUrl: string;
  nativeCurrency: { name: string; symbol: string; decimals: number };
  blockExplorerUrl: string;
  viemChain: Chain;
  contracts: ChainContracts;
  creationCodes: ChainCreationCodes;
  deploymentBlock: number;
  dustPoolDeploymentBlock: number | null;
  supportsEIP7702: boolean;
  canonicalForNaming: boolean;
  testnet: boolean;
}

// ─── Thanos Sepolia ────────────────────────────────────────────────────────────

const thanosSepolia = defineChain({
  id: 111551119090,
  name: 'Thanos Sepolia',
  nativeCurrency: { decimals: 18, name: 'TON', symbol: 'TON' },
  rpcUrls: { default: { http: ['https://rpc.thanos-sepolia.tokamak.network'] } },
  blockExplorers: { default: { name: 'Thanos Explorer', url: 'https://explorer.thanos-sepolia.tokamak.network' } },
  testnet: true,
});

const THANOS_SEPOLIA_CONFIG: ChainConfig = {
  id: 111551119090,
  name: 'Thanos Sepolia',
  rpcUrl: 'https://rpc.thanos-sepolia.tokamak.network',
  nativeCurrency: { name: 'TON', symbol: 'TON', decimals: 18 },
  blockExplorerUrl: 'https://explorer.thanos-sepolia.tokamak.network',
  viemChain: thanosSepolia,
  contracts: {
    announcer: '0x2C2a59E9e71F2D1A8A2D447E73813B9F89CBb125',
    registry: '0x9C527Cc8CB3F7C73346EFd48179e564358847296',
    nameRegistry: '0x0129DE641192920AB78eBca2eF4591E2Ac48BA59',
    walletFactory: '0xbc8e75a5374a6533cD3C4A427BF4FA19737675D3',
    legacyWalletFactory: '0x85e7Fe33F594AC819213e63EEEc928Cb53A166Cd',
    accountFactory: '0xfE89381ae27a102336074c90123A003e96512954',
    legacyAccountFactory: '0x0D93df03e6CF09745A24Ee78A4Cab032781E7aa6',
    entryPoint: '0x5c058Eb93CDee95d72398E5441d989ef6453D038',
    paymaster: '0x9e2eb36F7161C066351DC9E418E7a0620EE5d095',
    dustPool: '0x473e83478caB06F685C4536ebCfC6C21911F7852',
    dustPoolVerifier: '0x3ff80Dc7F1D39155c6eac52f5c5Cf317524AF25C',
    subAccount7702: null,
    nameRegistryMerkle: null,
    nameVerifier: '0x0000000000000000000000000000000000000000', // placeholder — deploy pending
  },
  creationCodes: {
    wallet: '0x60a060405234801561000f575f80fd5b5060405161088e38038061088e83398101604081905261002e9161003f565b6001600160a01b031660805261006c565b5f6020828403121561004f575f80fd5b81516001600160a01b0381168114610065575f80fd5b9392505050565b6080516107fd6100915f395f8181607e015281816101d901526103d301526107fd5ff3fe608060405260043610610041575f3560e01c80635cd5972c1461004c5780638da5cb5b1461006d578063affed0e0146100bd578063da0980c7146100df575f80fd5b3661004857005b5f80fd5b348015610057575f80fd5b5061006b610066366004610647565b6100fe565b005b348015610078575f80fd5b506100a07f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156100c8575f80fd5b506100d15f5481565b6040519081526020016100b4565b3480156100ea575f80fd5b5061006b6100f9366004610696565b6102c9565b60015460ff1615610122576040516345f5ce8b60e11b815260040160405180910390fd5b6001805460ff1916811790555f80546040516bffffffffffffffffffffffff1930606090811b8216602084015287901b16603482015260488101919091524660688201526088016040516020818303038152906040528051906020012090505f816040516020016101bf91907f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c810191909152603c0190565b6040516020818303038152906040528051906020012090507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661020c8286866104d1565b6001600160a01b031614610232576040516282b42960e81b815260040160405180910390fd5b5f80544791806102418361072e565b91905055505f866001600160a01b0316826040515f6040518083038185875af1925050503d805f811461028f576040519150601f19603f3d011682016040523d82523d5f602084013e610294565b606091505b50509050806102b6576040516312171d8360e31b815260040160405180910390fd5b50506001805460ff191690555050505050565b60015460ff16156102ed576040516345f5ce8b60e11b815260040160405180910390fd5b6001805460ff1916811790556040515f903090889088906103119089908990610746565b6040519081900381205f546bffffffffffffffffffffffff19606096871b811660208501529490951b90931660348201526048810191909152606881019190915260888101919091524660a882015260c8016040516020818303038152906040528051906020012090505f816040516020016103b991907f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c810191909152603c0190565b6040516020818303038152906040528051906020012090507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166104068286866104d1565b6001600160a01b03161461042c576040516282b42960e81b815260040160405180910390fd5b5f8054908061043a8361072e565b91905055505f886001600160a01b031688888860405161045b929190610746565b5f6040518083038185875af1925050503d805f8114610495576040519150601f19603f3d011682016040523d82523d5f602084013e61049a565b606091505b50509050806104bc576040516312171d8360e31b815260040160405180910390fd5b50506001805460ff1916905550505050505050565b5f604182146104e157505f6105e0565b5f6104ef6020828587610755565b6104f89161077c565b90505f610509604060208688610755565b6105129161077c565b90505f858560408181106105285761052861079a565b919091013560f81c9150507f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0821115610566575f93505050506105e0565b601b8160ff1610156105805761057d601b826107ae565b90505b604080515f81526020810180835289905260ff831691810191909152606081018490526080810183905260019060a0016020604051602081039080840390855afa1580156105d0573d5f803e3d5ffd5b5050506020604051035193505050505b9392505050565b80356001600160a01b03811681146105fd575f80fd5b919050565b5f8083601f840112610612575f80fd5b50813567ffffffffffffffff811115610629575f80fd5b602083019150836020828501011115610640575f80fd5b9250929050565b5f805f60408486031215610659575f80fd5b610662846105e7565b9250602084013567ffffffffffffffff81111561067d575f80fd5b61068986828701610602565b9497909650939450505050565b5f805f805f80608087890312156106ab575f80fd5b6106b4876105e7565b955060208701359450604087013567ffffffffffffffff808211156106d7575f80fd5b6106e38a838b01610602565b909650945060608901359150808211156106fb575f80fd5b5061070889828a01610602565b979a9699509497509295939492505050565b634e487b7160e01b5f52601160045260245ffd5b5f6001820161073f5761073f61071a565b5060010190565b818382375f9101908152919050565b5f8085851115610763575f80fd5b8386111561076f575f80fd5b5050820193919092039150565b80356020831015610794575f19602084900360031b1b165b92915050565b634e487b7160e01b5f52603260045260245ffd5b60ff81811683821601908111156107945761079461071a56fea2646970667358221220ae2c2a49601177ccafd839b230577565f89fa02daf76c67848d6f00fcc35f8cc64736f6c63430008140033',
    legacyWallet: '0x60a060405234801561000f575f80fd5b506040516107e03803806107e083398101604081905261002e9161003f565b6001600160a01b031660805261006c565b5f6020828403121561004f575f80fd5b81516001600160a01b0381168114610065575f80fd5b9392505050565b60805161074f6100915f395f8181607e015281816101a90152610365015261074f5ff3fe608060405260043610610041575f3560e01c80635cd5972c1461004c5780638da5cb5b1461006d578063affed0e0146100bd578063da0980c7146100df575f80fd5b3661004857005b5f80fd5b348015610057575f80fd5b5061006b610066366004610599565b6100fe565b005b348015610078575f80fd5b506100a07f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b0390911681526020015b60405180910390f35b3480156100c8575f80fd5b506100d15f5481565b6040519081526020016100b4565b3480156100ea575f80fd5b5061006b6100f93660046105e8565b61028f565b5f80546040516bffffffffffffffffffffffff1930606090811b8216602084015287901b16603482015260488101919091524660688201526088016040516020818303038152906040528051906020012090505f8160405160200161018f91907f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c810191909152603c0190565b6040516020818303038152906040528051906020012090507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166101dc828686610459565b6001600160a01b031614610202576040516282b42960e81b815260040160405180910390fd5b5f8054908061021083610680565b909155505060405147905f906001600160a01b0388169083908381818185875af1925050503d805f811461025f576040519150601f19603f3d011682016040523d82523d5f602084013e610264565b606091505b5050905080610286576040516312171d8360e31b815260040160405180910390fd5b50505050505050565b5f30878787876040516102a3929190610698565b6040519081900381205f546bffffffffffffffffffffffff19606096871b811660208501529490951b90931660348201526048810191909152606881019190915260888101919091524660a882015260c8016040516020818303038152906040528051906020012090505f8160405160200161034b91907f19457468657265756d205369676e6564204d6573736167653a0a3332000000008152601c810191909152603c0190565b6040516020818303038152906040528051906020012090507f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610398828686610459565b6001600160a01b0316146103be576040516282b42960e81b815260040160405180910390fd5b5f805490806103cc83610680565b91905055505f886001600160a01b03168888886040516103ed929190610698565b5f6040518083038185875af1925050503d805f8114610427576040519150601f19603f3d011682016040523d82523d5f602084013e61042c565b606091505b505090508061044e576040516312171d8360e31b815260040160405180910390fd5b505050505050505050565b5f6041821461046957505f610532565b5f61047760208285876106a7565b610480916106ce565b90505f6104916040602086886106a7565b61049a916106ce565b90505f858560408181106104b0576104b06106ec565b919091013560f81c915050601b8110156104d2576104cf601b82610700565b90505b604080515f81526020810180835289905260ff831691810191909152606081018490526080810183905260019060a0016020604051602081039080840390855afa158015610522573d5f803e3d5ffd5b5050506020604051035193505050505b9392505050565b80356001600160a01b038116811461054f575f80fd5b919050565b5f8083601f840112610564575f80fd5b50813567ffffffffffffffff81111561057b575f80fd5b602083019150836020828501011115610592575f80fd5b9250929050565b5f805f604084860312156105ab575f80fd5b6105b484610539565b9250602084013567ffffffffffffffff8111156105cf575f80fd5b6105db86828701610554565b9497909650939450505050565b5f805f805f80608087890312156105fd575f80fd5b61060687610539565b955060208701359450604087013567ffffffffffffffff80821115610629575f80fd5b6106358a838b01610554565b9096509450606089013591508082111561064d575f80fd5b5061065a89828a01610554565b979a9699509497509295939492505050565b634e487b7160e01b5f52601160045260245ffd5b5f600182016106915761069161066c565b5060010190565b818382375f9101908152919050565b5f80858511156106b5575f80fd5b838611156106c1575f80fd5b5050820193919092039150565b803560208310156106e6575f19602084900360031b1b165b92915050565b634e487b7160e01b5f52603260045260245ffd5b60ff81811683821601908111156106e6576106e661066c56fea2646970667358221220befef0ffbba9994d696b7cbf8606cc6dda0e5a488ebe379619b08c1a4531e38b64736f6c63430008140033',
    account: '0x60c060405234801561000f575f80fd5b5060405161088838038061088883398101604081905261002e916100ec565b6001600160a01b03821661007b5760405162461bcd60e51b815260206004820152600f60248201526e16995c9bc8195b9d1c9e541bda5b9d608a1b60448201526064015b60405180910390fd5b6001600160a01b0381166100be5760405162461bcd60e51b815260206004820152600a6024820152692d32b9379037bbb732b960b11b6044820152606401610072565b6001600160a01b039182166080521660a052610124565b6001600160a01b03811681146100e9575f80fd5b50565b5f80604083850312156100fd575f80fd5b8251610108816100d5565b6020840151909250610119816100d5565b809150509250929050565b60805160a05161072961015f5f395f8181609a01526101ea01525f818160e5015281816101530152818161029f015261035e01526107295ff3fe60806040526004361061004c575f3560e01c80633a871cdd146100575780638da5cb5b14610089578063b0d691fe146100d4578063b61d27f614610107578063ece5313214610128575f80fd5b3661005357005b5f80fd5b348015610062575f80fd5b50610076610071366004610519565b610147565b6040519081526020015b60405180910390f35b348015610094575f80fd5b506100bc7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610080565b3480156100df575f80fd5b506100bc7f000000000000000000000000000000000000000000000000000000000000000081565b348015610112575f80fd5b50610126610121366004610583565b610294565b005b348015610133575f80fd5b50610126610142366004610603565b610353565b5f336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146101915760405163bd07c55160e01b815260040160405180910390fd5b6040517f19457468657265756d205369676e6564204d6573736167653a0a3332000000006020820152603c81018490525f90605c0160408051601f19818403018152919052805160209091012090506001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166102218261021c61014089018961061c565b610404565b6001600160a01b03161461023957600191505061028d565b8215610288576040515f90339085908381818185875af1925050503d805f811461027e576040519150601f19603f3d011682016040523d82523d5f602084013e610283565b606091505b505050505b5f9150505b9392505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146102dd5760405163bd07c55160e01b815260040160405180910390fd5b5f80856001600160a01b03168585856040516102fa929190610666565b5f6040518083038185875af1925050503d805f8114610334576040519150601f19603f3d011682016040523d82523d5f602084013e610339565b606091505b50915091508161034b57805160208201fd5b505050505050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461039c5760405163bd07c55160e01b815260040160405180910390fd5b478015610400575f826001600160a01b0316826040515f6040518083038185875af1925050503d805f81146103ec576040519150601f19603f3d011682016040523d82523d5f602084013e6103f1565b606091505b50509050806103fe575f80fd5b505b5050565b5f6041821461041457505f61028d565b5f6104226020828587610675565b61042b9161069c565b90505f61043c604060208688610675565b6104459161069c565b90505f8585604081811061045b5761045b6106ba565b919091013560f81c9150507f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a0821115610499575f935050505061028d565b601b8160ff1610156104b3576104b0601b826106ce565b90505b604080515f81526020810180835289905260ff831691810191909152606081018490526080810183905260019060a0016020604051602081039080840390855afa158015610503573d5f803e3d5ffd5b5050604051601f19015198975050505050505050565b5f805f6060848603121561052b575f80fd5b833567ffffffffffffffff811115610541575f80fd5b84016101608187031215610553575f80fd5b95602085013595506040909401359392505050565b80356001600160a01b038116811461057e575f80fd5b919050565b5f805f8060608587031215610596575f80fd5b61059f85610568565b935060208501359250604085013567ffffffffffffffff808211156105c2575f80fd5b818701915087601f8301126105d5575f80fd5b8135818111156105e3575f80fd5b8860208285010111156105f4575f80fd5b95989497505060200194505050565b5f60208284031215610613575f80fd5b61028d82610568565b5f808335601e19843603018112610631575f80fd5b83018035915067ffffffffffffffff82111561064b575f80fd5b60200191503681900382131561065f575f80fd5b9250929050565b818382375f9101908152919050565b5f8085851115610683575f80fd5b8386111561068f575f80fd5b5050820193919092039150565b803560208310156106b4575f19602084900360031b1b165b92915050565b634e487b7160e01b5f52603260045260245ffd5b60ff81811683821601908111156106b457634e487b7160e01b5f52601160045260245ffdfea26469706673582212207f6fd7f10fc3f910abbb729b3e4dad9966c43cf850866292ff9388402960f44b64736f6c63430008140033',
    legacyAccount: '0x60c060405234801561000f575f80fd5b506040516107c23803806107c283398101604081905261002e9161005c565b6001600160a01b039182166080521660a052610094565b6001600160a01b0381168114610059575f80fd5b50565b5f806040838503121561006d575f80fd5b825161007881610045565b602084015190925061008981610045565b809150509250929050565b60805160a0516106f36100cf5f395f8181609a01526101ea01525f818160e5015281816101530152818161029f015261035e01526106f35ff3fe60806040526004361061004c575f3560e01c80633a871cdd146100575780638da5cb5b14610089578063b0d691fe146100d4578063b61d27f614610107578063ece5313214610128575f80fd5b3661005357005b5f80fd5b348015610062575f80fd5b506100766100713660046104e3565b610147565b6040519081526020015b60405180910390f35b348015610094575f80fd5b506100bc7f000000000000000000000000000000000000000000000000000000000000000081565b6040516001600160a01b039091168152602001610080565b3480156100df575f80fd5b506100bc7f000000000000000000000000000000000000000000000000000000000000000081565b348015610112575f80fd5b5061012661012136600461054d565b610294565b005b348015610133575f80fd5b506101266101423660046105cd565b610353565b5f336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146101915760405163bd07c55160e01b815260040160405180910390fd5b6040517f19457468657265756d205369676e6564204d6573736167653a0a3332000000006020820152603c81018490525f90605c0160408051601f19818403018152919052805160209091012090506001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000166102218261021c6101408901896105e6565b610404565b6001600160a01b03161461023957600191505061028d565b8215610288576040515f90339085908381818185875af1925050503d805f811461027e576040519150601f19603f3d011682016040523d82523d5f602084013e610283565b606091505b505050505b5f9150505b9392505050565b336001600160a01b037f000000000000000000000000000000000000000000000000000000000000000016146102dd5760405163bd07c55160e01b815260040160405180910390fd5b5f80856001600160a01b03168585856040516102fa929190610630565b5f6040518083038185875af1925050503d805f8114610334576040519150601f19603f3d011682016040523d82523d5f602084013e610339565b606091505b50915091508161034b57805160208201fd5b505050505050565b336001600160a01b037f0000000000000000000000000000000000000000000000000000000000000000161461039c5760405163bd07c55160e01b815260040160405180910390fd5b478015610400575f826001600160a01b0316826040515f6040518083038185875af1925050503d805f81146103ec576040519150601f19603f3d011682016040523d82523d5f602084013e6103f1565b606091505b50509050806103fe575f80fd5b505b5050565b5f6041821461041457505f61028d565b5f610422602082858761063f565b61042b91610666565b90505f61043c60406020868861063f565b61044591610666565b90505f8585604081811061045b5761045b610684565b919091013560f81c915050601b81101561047d5761047a601b82610698565b90505b604080515f81526020810180835289905260ff831691810191909152606081018490526080810183905260019060a0016020604051602081039080840390855afa1580156104cd573d5f803e3d5ffd5b5050604051601f19015198975050505050505050565b5f805f606084860312156104f5575f80fd5b833567ffffffffffffffff81111561050b575f80fd5b8401610160818703121561051d575f80fd5b95602085013595506040909401359392505050565b80356001600160a01b0381168114610548575f80fd5b919050565b5f805f8060608587031215610560575f80fd5b61056985610532565b935060208501359250604085013567ffffffffffffffff8082111561058c575f80fd5b818701915087601f83011261059f575f80fd5b8135818111156105ad575f80fd5b8860208285010111156105be575f80fd5b95989497505060200194505050565b5f602082840312156105dd575f80fd5b61028d82610532565b5f808335601e198436030181126105fb575f80fd5b83018035915067ffffffffffffffff821115610615575f80fd5b602001915036819003821315610629575f80fd5b9250929050565b818382375f9101908152919050565b5f808585111561064d575f80fd5b83861115610659575f80fd5b5050820193919092039150565b8035602083101561067e575f19602084900360031b1b165b92915050565b634e487b7160e01b5f52603260045260245ffd5b60ff818116838216019081111061067e57634e487b7160e01b5f52601160045260245ffdfea2646970667358221220601ea57e2ed5cdf5f17b7c85f83eb0ab766851da51f6e42ccb933373281567c464736f6c63430008140033',
  },
  deploymentBlock: 6272527,
  dustPoolDeploymentBlock: 6327184,
  supportsEIP7702: false,
  canonicalForNaming: false,
  testnet: true,
};

// ─── Ethereum Sepolia ──────────────────────────────────────────────────────────

const ethereumSepolia = defineChain({
  id: 11155111,
  name: 'Ethereum Sepolia',
  nativeCurrency: { decimals: 18, name: 'Sepolia ETH', symbol: 'ETH' },
  rpcUrls: { default: { http: ['https://ethereum-sepolia-rpc.publicnode.com'] } },
  blockExplorers: { default: { name: 'Etherscan', url: 'https://sepolia.etherscan.io' } },
  testnet: true,
});

const ETHEREUM_SEPOLIA_CONFIG: ChainConfig = {
  id: 11155111,
  name: 'Ethereum Sepolia',
  rpcUrl: 'https://ethereum-sepolia-rpc.publicnode.com',
  nativeCurrency: { name: 'Sepolia ETH', symbol: 'ETH', decimals: 18 },
  blockExplorerUrl: 'https://sepolia.etherscan.io',
  viemChain: ethereumSepolia,
  contracts: {
    announcer: '0x64044FfBefA7f1252DdfA931c939c19F21413aB0',
    registry: '0xb848398167054cCb66264Ec25C35F8CfB1EF1Ca7',
    nameRegistry: '0x4364cd60dF5F4dC82E81346c4E64515C08f19BBc',
    walletFactory: '0x1c65a6F830359f207e593867B78a303B9D757453',
    legacyWalletFactory: '', // No legacy on Sepolia
    accountFactory: '0xc73fce071129c7dD7f2F930095AfdE7C1b8eA82A',
    legacyAccountFactory: '', // No legacy on Sepolia
    entryPoint: '0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789', // Canonical v0.6
    paymaster: '0x20C28cbF9bc462Fb361C8DAB0C0375011b81BEb2',
    dustPool: '0xF1c5F2bF2E21287C49779c6893728A2B954478d1',
    dustPoolVerifier: '0x71825C2882e41e5a845dEFD99A7f3dC8a03A8B27',
    subAccount7702: '0x29365d51Ff8007dCC7ae6c62aF450e5c8C3263f7',
    nameRegistryMerkle: '0x0000000000000000000000000000000000000000', // placeholder — deploy pending
    nameVerifier: null,
  },
  creationCodes: {
    // Same as Thanos — compiled from identical source with same Solc 0.8.20
    wallet: THANOS_SEPOLIA_CONFIG.creationCodes.wallet,
    legacyWallet: '', // No legacy on Sepolia
    account: THANOS_SEPOLIA_CONFIG.creationCodes.account,
    legacyAccount: '', // No legacy on Sepolia
  },
  deploymentBlock: 10251347,
  dustPoolDeploymentBlock: 10253309,
  supportsEIP7702: true,
  canonicalForNaming: true,
  testnet: true,
};

// ─── Registry ──────────────────────────────────────────────────────────────────

const CHAIN_CONFIGS: Record<number, ChainConfig> = {
  [THANOS_SEPOLIA_CONFIG.id]: THANOS_SEPOLIA_CONFIG,
  [ETHEREUM_SEPOLIA_CONFIG.id]: ETHEREUM_SEPOLIA_CONFIG,
};

export const DEFAULT_CHAIN_ID = 111551119090;

export function getChainConfig(chainId?: number): ChainConfig {
  const id = chainId ?? DEFAULT_CHAIN_ID;
  const config = CHAIN_CONFIGS[id];
  if (!config) {
    throw new Error(`Unsupported chain: ${id}. Supported: ${Object.keys(CHAIN_CONFIGS).join(', ')}`);
  }
  return config;
}

export function getSupportedChains(): ChainConfig[] {
  return Object.values(CHAIN_CONFIGS);
}

export function getSupportedViemChains(): Chain[] {
  return Object.values(CHAIN_CONFIGS).map(c => c.viemChain);
}

export function isChainSupported(chainId: number): boolean {
  return chainId in CHAIN_CONFIGS;
}

export function getCanonicalNamingChain(): ChainConfig {
  const chain = Object.values(CHAIN_CONFIGS).find(c => c.canonicalForNaming);
  if (!chain) throw new Error('No canonical naming chain configured');
  return chain;
}

// Minimum balance needed to cover gas for a claim transaction (EOA only).
// Based on 21000 gas * 1 gwei * 2x buffer = 0.000042; using 0.0001 to be safe.
// Sponsored wallet types (create2, account, eip7702) can claim any amount > 0.
export const MIN_CLAIMABLE_BALANCE = 0.0001;

// Re-export viem chain definitions for providers.tsx
export { thanosSepolia, ethereumSepolia };
